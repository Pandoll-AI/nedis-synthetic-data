# 🔬 테이블별 컬럼 비교 대시보드 사용 가이드

## ✅ 현재 상황

### 📊 사용 가능한 데이터
- **Original Database**: `nedis_data.duckdb` (9,123,382 records)
  - 테이블: `diag_adm`, `diag_er`, `iciss`, `nedis2017`
- **Synthetic Database**: `nedis_synth_2017.duckdb` (테스트 데이터만 있음)

### 🔧 해결된 문제
- ✅ 중복 콜백 오류 수정
- ✅ 데이터베이스 경로 설정 최적화
- ✅ 데모 모드 구현 (동일 DB로 기능 시연 가능)

## 🚀 대시보드 실행 방법

### 방법 1: 기본 실행
```bash
python test_dashboard.py
# 접속: http://localhost:8050
```

### 방법 2: 데모 모드 (권장)
```bash
python test_dashboard_demo.py
# 접속: http://localhost:8051
```

## 📋 사용 단계별 가이드

### 1단계: 대시보드 접속
브라우저에서 `http://localhost:8051` 접속

### 2단계: 데이터베이스 설정 확인
- Original DB: `nedis_data.duckdb` (기본 설정됨)
- Synthetic DB: `nedis_data.duckdb` (데모용으로 동일하게 설정됨)

### 3단계: 테이블 비교 실행
1. **"Database Column Comparison"** 섹션으로 이동
2. **"🔄 Compare Tables"** 버튼 클릭
3. 드롭다운에서 사용 가능한 테이블 확인:
   - `diag_adm`
   - `diag_er`
   - `iciss`
   - `nedis2017`

### 4단계: 테이블 및 옵션 선택
1. **테이블 선택**: 하나 이상의 테이블을 드롭다운에서 선택
2. **비교 타입 선택**:
   - **All Columns**: 모든 컬럼 비교
   - **Numeric Only**: 숫자형 컬럼만
   - **Categorical Only**: 범주형 컬럼만

### 5단계: 결과 확인
#### 📊 Numeric Columns 섹션
- **기본 통계**: 평균, 중위수, 표준편차
- **분위수**: 5%, 25%, 75%, 95%
- **분포 특성**: 왜도(Skewness), 첨도(Kurtosis)
- **차이 비율**: 색상 코딩으로 표시
  - 🟢 **초록색**: 5% 이하 (매우 유사)
  - 🟡 **노란색**: 5-15% (보통 차이)
  - 🔴 **빨간색**: 15% 이상 (큰 차이)

#### 🏷️ Categorical Columns 섹션
- **고유값 개수** 및 차이 비율
- **최빈값(Mode)** 및 빈도
- **데이터 타입** 비교

#### 📈 Comparison Summary 카드
- 전체 비교된 컬럼 수
- 숫자형/범주형 컬럼 분류
- **전체 유사성 지수** 계산

### 6단계: 추가 기능 사용
#### 📈 분포 차트 보기
1. **"📈 Show Charts"** 버튼 클릭
2. 선택된 테이블의 숫자형 컬럼 히스토그램 비교
3. 분포 오버레이로 시각적 차이 확인

#### 📊 데이터 내보내기
1. **"📊 Export to CSV"** 버튼 클릭
2. 모든 비교 결과가 CSV 파일로 저장됨
3. 타임스탬프가 포함된 파일명으로 자동 저장

## 🎯 주요 특징

### 🔄 즉시 비교
- Validation 프로세스 없이 바로 테이블 비교
- 빠른 응답 시간으로 사용자 경험 향상

### 📊 향상된 통계
- 기존보다 더 많은 통계 지표 제공
- 차이 비율 자동 계산 및 색상 코딩

### 🎨 직관적 UI
- Bootstrap 기반 모던 디자인
- 색상으로 차이 정도 즉시 파악 가능

### 📈 시각화 지원
- Plotly 기반 대화형 차트
- 분포 비교를 위한 히스토그램 오버레이

## ⚠️ 현재 제한사항

1. **Synthetic 데이터 부족**: 실제 synthetic 데이터가 없어 데모 모드로 운영
2. **대용량 데이터**: 9백만 레코드 중 샘플링된 데이터로 비교 수행
3. **테이블 제한**: 한 번에 최대 몇 개 테이블까지 효과적 비교 가능

## 🔮 향후 개선 계획

1. **실제 Synthetic 데이터 생성**: 진정한 original vs synthetic 비교
2. **고급 필터링**: 차이 비율 기준 컬럼 필터링
3. **추가 차트**: Box plot, Violin plot 지원
4. **PDF 리포트**: 전체 비교 결과의 PDF 리포트 생성
5. **실시간 알림**: 특정 임계값 초과시 알림 시스템

---

**💡 팁**: 처음 사용시에는 작은 테이블(예: `iciss`)부터 시작해서 기능을 익힌 후, 대용량 테이블(예: `nedis2017`)로 확장하는 것을 권장합니다.